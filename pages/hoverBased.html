<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Rive Hover Animation (Boolean)</title>
  <script src="https://unpkg.com/@rive-app/canvas@2.14.0"></script>
  <link rel="stylesheet" href="hoverBased.css"> 
  <style>
      /* body {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        background: #121212;
      }  */
      canvas {
        /* width: 200px;
        height: 200px;
        cursor: pointer; */
        margin: 30px;
      }

  </style>
  
</head>
<body>
  <button id="backBtn">Back</button>
  <h1>Mouse controlled Animation:</h1>
  <h3>Hover on the desired image to know what happens!</h3>

  <canvas id="refresh" width="300" height="300"></canvas>
  <canvas id="back" width="300" height="300"></canvas>
  <h3>Hover Loop</h3>
  <canvas id="settings" width="300" height="300"></canvas>
  

  <script>
    document.getElementById('backBtn').addEventListener('click', () => {
      window.location.href = './inputAnimations.html';
    });

    function setupRiveHoverAnimation(canvasId, src, stateMachine, inputName) {
      const canvas = document.getElementById(canvasId);

      const riveInstance = new rive.Rive({
        src,
        canvas,
        autoplay: true,
        stateMachines: stateMachine,
        fit: rive.Fit.CONTAIN,
        alignment: rive.Alignment.CENTER,
        onLoad: () => {
          riveInstance.resizeDrawingSurfaceToCanvas();
          const inputs = riveInstance.stateMachineInputs(stateMachine);
          const hoverInput = inputs.find(i => i.name === inputName);

          if (!hoverInput) {
            console.error(`Input "${inputName}" not found in "${stateMachine}"`);
            return;
          }

          canvas.addEventListener("mouseenter", () => {
            hoverInput.value = false;
            setTimeout(() => hoverInput.value = true, 10);
          });

          canvas.addEventListener("mouseleave", () => {
            hoverInput.value = false;
          });
        }
      });

      const resizeObserver = new ResizeObserver(() => {
        try { riveInstance.resizeDrawingSurfaceToCanvas(); } catch(e) {}
      });
      resizeObserver.observe(canvas);
    }

    // ðŸ‘‡ Setup multiple Rive animations easily
    setupRiveHoverAnimation("settings", "../assets/settings_one_gear.riv", "State Machine 1", "Boolean 1");
    setupRiveHoverAnimation("refresh", "../assets/refresh.riv", "State Machine 1", "hoverOn");
    setupRiveHoverAnimation("back", "../assets/backHover.riv", "State Machine 1", "hoverOn");
  </script>
</body>
</html>